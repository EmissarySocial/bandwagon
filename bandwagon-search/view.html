<div id="search" class="fullscreen padding-none" script="on load take .selected from .nav-item for #nav-{{.NavigationID}}">

	<link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/{{.Token}}/feed?{{.QueryString}}">

	<div class="flex-row padding-vertical-lg margin-bottom" style="background-color:var(--gray50);">
		<div class="hide md:show sidebar"></div>
		<div class="flex-grow margin-horizontal">
			{{- template "view-widget" . -}}
		</div>
	</div>

	<div class="md:flex-row">

		<div class="sidebar margin-bottom-lg">
			{{template "view-sidebar" .}}


			{{- if .UserCan "edit" -}}
				<div class="text-sm margin-top-xl">
					ADMIN TOOLS
				</div>
				<div class="text-sm">
					<button hx-get="/{{.Token}}/edit">Edit Search Page</button>
				</div>
			{{- end -}}

		</div>

		<div class="flex-grow margin-horizontal container">

			<div id="search-results">
				{{template "view-results" .}}
			</div>
		</div>
	</div>
</div>


<style>
	.sidebar {
		padding:0px 16px;
	}

	@media screen and (min-width: 768px) {
		.sidebar {
			width:240px;
			min-width:240px;
			max-width:240px;
			margin:0 auto;
		}
	}

	.search-navigation {
		border-radius:8px;
		padding:8px 16px;
		display:block;
		cursor:pointer;
		color:var(--text-color);
	}

	.search-navigation:hover {
		background-color:var(--gray15);
		color:var(--text-color);
	}

	.search-navigation.selected,
	.search-navigation.selected:hover {
		background-color:var(--gray40);
		color:var(--white);
		font-weight:600;
	}

	.search-container {
		width:100%;
	}

	#search-widget {
		display:flex;
		flex-direction:row;
		flex-wrap:nowrap;
		flex-grow:1;
		margin:0px;
		padding:0px;
	}

	#search-widget:has(input:focus) {
		outline:solid;
		outline-color: -webkit-focus-ring-color;
	}

	#search-widget > input {
		border:none;
		outline:none;
		flex-grow:1;
	}

	#search-widget > button {
		font-size:calc(var(--rhythm) * 1.75);
		margin:4px;
	}

	#search-tags {
		display:flex;
		flex-direction:row;
		flex-wrap:nowrap;
	}

	#search-input {
		flex-grow:1;
		margin-left:(--rhythm);
	}

	#search-suggestions {
		margin-top:3px;
	}

	#search-suggestions > [role=option] {
		display:block;
		cursor:pointer;
		padding: 4px 8px;
		color:var(--black);
	}

	#search-suggestions > [role=option].selected {
		background-color:var(--gray20);
	}

	.list-box {
		width:100%;
		border:solid 2px var(--gray40);
	}

	.pop-up {
		position:absolute;
		visibility:hidden;
		z-index:10;
		background-color:var(--input-background);
		box-shadow: 0px 0px 10px 0px rgba(0,0,0,0.2);
		border-top:none;
		border-bottom-left-radius: 8px;
		border-bottom-right-radius:8px;
	}

	#search-widget {
		display:flex;
		flex-direction:row;
		flex-wrap:nowrap;
		margin:0px;
		padding:0px;
	}

	#search-widget:has(input:focus) {
		outline:solid;
		outline-color: -webkit-focus-ring-color;
	}

	#search-widget > input {
		border:none;
		outline:none;
		flex-grow:1;
	}

	#search-widget > button {
		font-size:calc(var(--rhythm) * 1.75);
		margin:4px;
	}

	#search-tags {
		display:flex;
		flex-direction:row;
		flex-wrap:nowrap;
	}

	#search-input {
		flex-grow:1;
		margin-left:(--rhythm);
	}

	#search-suggestions {
		margin-top:3px;
	}

	.list-box {
		width:100%;
		border:solid 2px var(--gray40);
	}

	.pop-up {
		position:absolute;
		visibility:hidden;
		z-index:10;
		background-color:var(--input-background);
		box-shadow: 0px 0px 10px 0px rgba(0,0,0,0.2);
		border-top:none;
		border-bottom-left-radius: 8px;
		border-bottom-right-radius:8px;
	}

	#search-suggestions > [role=option] {
		display:block;
		cursor:pointer;
		padding: 4px 8px;
		color:var(--black);
	}

	#search-suggestions > [role=option].selected {
		background-color:var(--gray20);
	}
</style>