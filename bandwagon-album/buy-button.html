{{- $checkoutLabel := first (.Data "checkout label") "Buy Now" -}}

{{- if .UserHasRole "paid" -}}
	<button hx-get="/{{.StreamID}}/premium-downloads" class="outline">
		{{icon "download"}}
		Download Album
	</button>
{{- else -}}
	<button hx-get="/{{.StreamID}}/checkout" class="outline">
		<span class="htmx-request-hide">{{icon "star"}}</span>
		<span class="htmx-request-show"><span class="spin">{{icon "loading"}}</span></span>
		{{$checkoutLabel}}
	</button>
{{- end -}}