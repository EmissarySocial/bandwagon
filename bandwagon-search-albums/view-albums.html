{{- $token := .Token -}}
{{- $results := .Search.Top60.ByName.AllowAll -}}
{{- $results := $results.WhereType "Album"  -}}
{{- $results := $results.Slice -}}

{{- if $results.NotEmpty -}}
	
	{{- $last := $results.Last -}}

	{{- range $result := $results -}}

		<div class="flex-row hover-trigger clickable margin-bottom-sm" script="install blockselect()">
			<div class="flex-shrink-0 flex-grow-0 width-64 square" style="object-fit:cover;">
				<img src="{{$result.IconURL}}" class="square width-64 margin-bottom-xs block" style="object-fit:cover;" aria-hidden="true" loading="lazy">
			</div>
			<div class="flex-column">
				<div class="text-plain">
					<a href="{{$result.URL}}" class="bold turboclick">{{$result.Name}}</a><br>
				</div>
				<div class="text-gray flex-grow">
					{{$result.AttributedTo}}
				</div>
			</div>
		</div>
	{{- end -}}

	<div hx-get="/{{$token}}/view-albums?q={{.QueryString}}&name=GT:{{$last.Name}}" hx-target="this" hx-swap="outerHTML" hx-push-url="false" hx-trigger="revealed">Loading...</div>

{{- end -}}